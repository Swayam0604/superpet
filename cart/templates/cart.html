{% extends 'base.html' %}
{% load custom_filters %}
{% block title %}cart{% endblock %}
{% block content %}

{% if isEmpty %}
<h1 class="text-center">Your cart is empty. Add products to your cart!!</h1>
{% else %}
<div class="row">
  <div class="col">
  {% for cart_item in cartitems %}
    <div class="card mb-3" style="max-width: 540px;">
    <div class="row g-0">
      <div class="col-md-4">
        <img src="{{cart_item.product.product_image.url}}" class="img-fluid rounded-start" alt="...">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">{{cart_item.product.product_name}}</h5>
          <p class="card-text">{{cart_item.product.product_description}}</p>
          <p class="card-text">Price :{{cart_item.product.product_price}}</p>
          <p class="card-text">Quantity :{{cart_item.quantity}}</p>

          <form action="{% url 'update-cart-item' cart_item.id %}">
            <button
              class="btn btn-primary m-3"
              type="button"
              onclick="updateQuantity({{cart_item.id}},-1)"
            >
              -
            </button>
            <input
              type="number"
              value="{{cart_item.quantity}}"
              name="quantity"
              id="quantity{{cart_item.id}}"
              min="1"
             style ="width: 60px; text-align: center;"
            />
            <button
              class="btn btn-primary m-3"
              type="button"
              onclick="updateQuantity({{cart_item.id}},1)"
            >
              +
            </button>
            <button class="btn btn-success m-3" type="submit">Update</button>
          </form>
          <a class="btn btn-danger" href="{% url 'delete-cart-item' cart_item.id %}">Delete</a>
        </div>
      </div>
     
    </div>
  </div>
  {% endfor %}

</div>

<div class="col">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Product Name</th>
          <th scope="col">Quantity</th>
          <th scope="col">Price</th>
          <th scope="col">Total</th>
        </tr>
      </thead>
      <tbody>
        {% for cart_item in cartitems %}
        <tr>
          <th scope="row">{{cart_item.product.product_name}}</th>
          <td>{{cart_item.quantity}}</td>
          <td>{{cart_item.product.product_price}}</td>
          <td>{{cart_item.quantity|mul:cart_item.product.product_price}}</td>
        </tr>

        {% endfor %}
      </tbody>
    </table>

    


    <p>{{total}}</p>


    <a class="btn btn-dark" href="{% url 'checkout' %}">Place Order</a>
  </div>
</div>
{% endif %}




{% endblock %}